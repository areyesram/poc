<html>

<head>
    <script type="text/javascript" src="loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {
            'packages': ['corechart']
        });
        google.charts.setOnLoadCallback(refreshChart);

        function refreshChart() {
            const options = {
                title: 'Balance',
                legend: {
                    position: 'none'
                },
                curveType: 'function',
                animation: {
                    duration: 1000,
                    easing: 'linear'
                }
            };

            let data;
            let current = 0;
            let currentx = 0.5;
            let currenty = 0.5;
            const chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

            drawChart();
            setInterval(_ => drawChart(), 5000);

            function getData() {
                if (!data) {
                    data = [
                        ['T', 'Sales', 'Expenses']
                    ];
                    for (let i = 0; i < 100; i++) {
                        data.push([current++,
                            currentx += Math.random() - 0.5,
                            currenty += Math.random() - 0.5
                        ]);
                    }
                } else {
                    data.splice(1, 1);
                    data.push([current++,
                        currentx += Math.random() - 0.5,
                        currenty += Math.random() - 0.5
                    ]);
                }
                return google.visualization.arrayToDataTable(data);
            }

            function drawChart() {
                chart.draw(getData(), options);
            }
        }
    </script>
</head>

<body>
    <div id="curve_chart" style="width: 900px; height: 500px"></div>
</body>

</html>